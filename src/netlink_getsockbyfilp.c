struct sock *netlink_getsockbyfilp(struct file *filp)
{
    struct inode *inode = file_inode(filp);
    struct sock *sock;

    // 현재 fd 가 socket 인지 검사
    if (!S_ISSOCK(inode->i_mode))
        return ERR_PTR(-ENOTSOCK);

    // socket 타입이 AF_NETLINK 인지 검사
    sock = SOCKET_I(inode)->sk;
    if (sock->sk_family != AF_NETLINK)
        return ERR_PTR(-EINVAL);

    // sock 객체 카운터 증가 시점
    sock_hold(sock);
    return sock;
}